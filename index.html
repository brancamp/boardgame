<html>

<head>
    <title>Board Game</title>
    <style>
        body {
            overflow: hidden;
            margin: 0;
        }

    </style>
    <script src="three.js/build/three.min.js"></script>
    <script src="player.js"></script>
    <script src="gamecontroller.js"></script>
</head>

<body>
    <script>
        var scene = new THREE.Scene();

        //Set up the camera
        var cameraHolder = new THREE.Object3D();
        scene.add(cameraHolder);
        cameraHolder.moving = false;
        let camSize = 20;
        var aspect = window.innerWidth / window.innerHeight;
        let camera = new THREE.OrthographicCamera(-camSize * aspect, camSize * aspect, camSize, -camSize, 0, 1000);
        cameraHolder.add(camera);
        camera.position.set(10, 20, 10);
        camera.lookAt(scene.position);


        var renderer = new THREE.WebGLRenderer({
            antialias: true
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        var boxGeo = new THREE.BoxGeometry(10, 1, 10);
        var boxMat = new THREE.MeshBasicMaterial({
            color: 0xcccccc
        });
        var box = new THREE.Mesh(boxGeo, boxMat);
        scene.add(box);

        var game = new GameController(11, 15);
        var player1 = new Player(0, 0);


        window.addEventListener('resize', resizeHandler);
        window.addEventListener('keydown', keyHandler);

        update();


        function resizeHandler() {
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
        }

        function update() {
            requestAnimationFrame(update);
            renderer.render(scene, camera);


        }

        function keyHandler(e) {
            console.log("index keyhander");
            switch (e.keyCode) {
                case 65:
                    player1.move(1);
                    break;
                case 83:
                    player1.move(2);
                    break;
                case 87:
                    player1.move(3);
                    break;
                case 68:
                    player1.move(4);
                    break;
                case 37:
                    rotateCamera('left');
                    break;
                case 39:
                    rotateCamera('right');
                    break;
            }
        }

    </script>
</body>


</html>
